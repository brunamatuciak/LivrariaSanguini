<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/quizz.css">
    <script src="./js/funcoes.js"></script>
    <script src="./js/main.js"></script>
    <title>Livraria Sanguini</title>
</head>
<body>

    <div class="corFundo">
        <div class="header" style="width: 100%;">
            <div class="logo">
                <a href="./index.html"><img src="./img/novoLogo.png" alt="logo do site" width="70%"></a>
            </div>
            <div class="menuHeader">
                <div class="dropdown">
                    <button class="dropbtn">Gênero</button>
                    <div class="dropdown-content">
                        <a href="./fantasia.html" >Fantasia</a>
                        <a href="./ficcao.html" >Ficção Científica</a>
                    </div>
                </div>
                <p><a href="quizz.html" >Quizz</a></p>
                <p><a href="./index.html#sobreMim">Sobre</a></p>
            </div>
            <div class="cadastroLogin">
                <p><a href="cadastro.html" >Cadastro</a></p>
                <hr style="height: 8vh;">
                <p><a href="login.html" >Login</a></p>
            </div>

        </div>
        
        <div id="container" class="containertudo">

            <div class="tituloFavorito" >
                <p>Já leu Flores para Algernon?</p>
                <hr width="95%">
                <p style="font-size: 15px;">Responda algumas perguntas e teste se realmente é fã de um dos livros mais cobiçados da ficção científica!</p>
            </div>

            <div class="caixaMensagemQuizz">
                <p>"O problema, querido professor, é que você queria alguém que pudesse se tornar inteligente, mas continuasse numa jaula e fosse exibido, quando necessário, para colher as honras que você busca. O problema é que sou uma pessoa"</p>
            </div>

            <button onclick="comecarQuizz()" class="btnQuizz">Começar o quizz</button>

            <div id="divQuizz" style="display: none;">
            
                <div id="pergunta1">
                    
                
                </div>
                <div id="pergunta2" style="display: none;">
                   
                </div>
                <div id="pergunta3" style="display: none;">
                    
                </div>
                <div id="pergunta4" style="display: none;"> 
                   
                </div>
                <div id="pergunta5" style="display: none;">
                    
                </div>
            
            
            
            </div>

            <div id="quizzResultado" style="display: none;">
                    

                        <div class="tituloLivroResultado">
                            <span id="titulo"></span>
                            
                        </div>
                        <div>
                            <img id="urlImg" class="imgLivroResultado">
                        </div>
                    
            </div>

        </div>

       

        <footer>
            <div class="containerFooter" style="margin-right: 1%;">
                <img src="./img/LogoFooter.png" alt="logo" width="70%">
            </div>
    
            <ul style="margin-top: 3%; margin-right: 1%;">
                <li style="font-size: 25px; margin-bottom: 2%;">Navegação</li>
                <hr style="margin-bottom: 5%;">
                <li><a href=""></a>Gênero</li>
                <li style="margin-left: 30px; font-size: 18px;"><a href="./fantasia.html" ></a>Fantasia</li>
                <li style="margin-left: 30px; font-size: 18px;"><a href="./ficcao.html" ></a>Ficção Científica</li>
                <li><a href="./quizz.html" ></a>Quizz</li>
                <li><a href="./index.html" ></a>Sobre</li>
                <li><a href="./login.html" ></a>Login</li>
            </ul>
    
            <div class="minhasInfo">
                <div class="tituloFooter" style="display: flex; flex-direction: column;">
                    <p style="font-size: 25px; margin-bottom: 2%;">Nossas redes sociais </p>
                    <hr style="margin-bottom: 5%;">
                </div>
                <div class="imgRedes" style="display: flex; align-items: center;">
                    <a href="https://www.instagram.com/bru.sanguini/" ><img src="./img/instagram.png" width="40px"></a>
                    <a href="https://www.linkedin.com/in/brunasanguini/" ><img src="./img/linkedin.png" width="41px"></a>
                </div>
            </div>
    
        </footer>

    </div>
</body>
</html>

<script>
    //variáveis de fantasia
    var acerto = Number(0);
    var erro = Number(0);
    
    
    var ganhadorVarVar = "";

    var resp1A = "";
    var resp1B = "";

    function comecarQuizz() {
        if (sessionStorage.ID_USUARIO != 0) {
            resp1A = "Um rato"
            resp1B = "Uma raposa"
            divQuizz.style = "display:block"
            pergunta1.innerHTML = `
            <div class="pQuizz">Quem é Algernon?</div>
            <div class="btnQuizzPerg">
            <button id="perg1A" class="perguntas" style=" background-color: #D3F5FA;" onclick="perguntaQuizz1('${resp1A}')">Um rato</button>
            <div class="pQuizz" style="display: flex; align-items: center;">ou</div>
            <button id="perg1A" class="perguntas" style=" background-color: #D3F5FA;" onclick="perguntaQuizz1('${resp1B}')">Uma raposa</button>
            </div>
            `

        } else {
            alert('Por favor logue antes!')
        }
    }

    

    var texto2a = "";
    var texto2b = "";
    function perguntaQuizz1(resposta1) {
        if (resposta1 == "Uma raposa") {
            texto2a = "38"
            texto2b = "22"
            erro++

        }
        if (resposta1 == "Um rato") {
            texto2a = "38"
            texto2b = "22"
            acerto++

        }
       
        pergunta2.style = "display: block";
        pergunta2.innerHTML = `
        <div class="pQuizz">Qual era o QI de Charlie antes da cirurgia?</div>
        <div class="btnQuizzPerg">
        <button id="perg2A" class="perguntas" style=" background-color: #A6D8DF;" onclick="perguntaQuizz2('${texto2a}')">${texto2a}</button>
        <div class="pQuizz" style="display: flex; align-items: center;">ou</div>
        <button id="perg2A" class="perguntas" style=" background-color: #A6D8DF;" onclick="perguntaQuizz2('${texto2b}')">${texto2b}</button>
        </div>
        `
    }


    function perguntaQuizz2(resposta2) {
        if (resposta2 == "38") {
            texto2a = "Lili"
            texto2b = "Harriet"
            acerto++
        }
        if (resposta2 == "22") {
            texto2a = "Lili"
            texto2b = "Harriet"
            erro++
        }
        
        pergunta3.style = "display: block";
        pergunta3.innerHTML = `
        <div class="pQuizz">Por quem Charlie se apaixona durante a história?</div>
        <div class="btnQuizzPerg">
        <button id="perg3A" class="perguntas" style=" background-color: #7EC2CC;" onclick="perguntaQuizz3('${texto2a}')">${texto2a}</button>
        <div class="pQuizz" style="display: flex; align-items: center;">ou</div>
        <button id="perg3A" class="perguntas" style=" background-color: #7EC2CC;" onclick="perguntaQuizz3('${texto2b}')">${texto2b}</button>
        </div>
        `
    }

    function perguntaQuizz3(resposta3) {
        
        if (resposta3 == "Lili")  {
            texto2a = "Jogo de Labirinto"
            texto2b = "Jogo de cartas"
            erro++
            
        }
        if (resposta3 == "Harriet"){
            texto2a = "Jogo de Labirinto"
            texto2b = "Jogo de cartas"
            acerto++           

        }

        
        pergunta4.style = "display: block";
        pergunta4.innerHTML = `
        <div class="pQuizz">Qual era o jogo que Algernon e Charlie competiam:</div>
        <div class="btnQuizzPerg">
            <button id="perg4A" class="perguntas" style=" background-color: #519AA5;" onclick="perguntaQuizz4('${texto2a}')">${texto2a}</button>
        <div class="pQuizz" style="display: flex; align-items: center;">ou</div>
        <button id="perg4A" class="perguntas" style=" background-color: #519AA5;" onclick="perguntaQuizz4('${texto2b}')">${texto2b}</button>
        </div>
        `
    }
    function perguntaQuizz4(resposta4) {
        
        if (resposta4 == "Jogo de cartas") {
            texto2a = "Magia"
            texto2b = "Luta"

        
            
        }
        if (resposta4 == "Jogo de Labirinto") {
            texto2a = "Magia"
            texto2b = "Luta"
            
           

        }
        
        
        pergunta5.style = "display: block";
        pergunta5.innerHTML = `
        <div class="pQuizz">Depois de perder seu os benefícios da cirurgia, Charlie vai morar no:</div>
        <div class="btnQuizzPerg">
        <button id="perg5A" class="perguntas" style=" background-color: #3E7F89;" onclick="perguntaQuizz5('${texto2a}')">${texto2a}</button>
        <div class="pQuizz" style="display: flex; align-items: center;">ou</div>
        <button id="perg5A" class="perguntas" style=" background-color: #3E7F89;" onclick="perguntaQuizz5('${texto2b}')">${texto2b}</button>
        </div>
        `
    }
    function perguntaQuizz5(resposta5) {
        divQuizz.style = "display:none";
        quizzResultado.style = "display:block";
        
        if (resposta5 == "Magia"){
           
        }
        if (resposta5 == "Luta"){
        
        }
        if (resposta5 == "Corrida contra o tempo"){
         
        }
        if (resposta5 == "Lutas"){
         
        }
        if (resposta5 == "Um ponto de vista"){
          
        }
        if (resposta5 == "Vários pontos de vistas"){
            
        }
        if (resposta5 == "Série"){
          
        }
        if (resposta5 == "Livro único"){
       
        }
        if (contLivroDuna >= 3) {
            quizzResultado.innerHTML = `
            <div class="containerQuizzResul" style="display: flex;">
               
                     <div class="pQuizzResultado">Seu resultado foi: <br>
                    Duna - Parte 1</div>
                    <div onclick="mostrar(4)">
                        <img src="./img/imgCapaLivros/duna.jpg">
                    </div>  
                </div>`

            ganhadorVar = 4
        }
        if (contLivroSenhor >= 3) {
            quizzResultado.innerHTML = `
            <div class="containerQuizzResul" style="display: flex;">
                     <div class="pQuizzResultado">Seu resultado foi: <br>
                    A sociedade do Anel - Parte 1</div>
                    <div onclick="mostrar(11)">
                        <img src="./img/imgCapaLivros/ASociedadedoAnel.jpg">
                    </div>  `
             ganhadorVar = 11
        }
        if (contLivroGOT >= 3) {
            quizzResultado.innerHTML = `<div class="containerQuizzResul" style="display: flex;">
                     <div class="pQuizzResultado">Seu resultado foi: <br>
                        As Crônicas de Gelo e Fogo - Parte 1</div>
                    <div onclick="mostrar(3)">
                        <img src="./img/imgCapaLivros/AGuerrado Tronos.jpg">
                    </div>  `
                    ganhadorVar = 3
        }
        if (contLivroMago >= 3) {
            quizzResultado.innerHTML = `<div class="containerQuizzResul" style="display: flex;">
                     <div class="pQuizzResultado">Seu resultado foi: <br>
                        O Mago Aprendiz</div>
                    <div onclick="mostrar(14)">
                        <img src="./img/imgCapaLivros/magoAprendiz.jpg">
                    </div>  `
                    ganhadorVar = 14
        }
        if (contLivroHP >= 3) {
            quizzResultado.innerHTML = `<div class="containerQuizzResul" style="display: flex;">
                     <div class="pQuizzResultado">Seu resultado foi: <br>
                    Duna - Parte 1</div>
                    <div onclick="mostrar(15)">
                        <img src="./img/imgCapaLivros/HarryPottereaPedraFilosofal.jpg">
                    </div>  `
                    ganhadorVar = 15
        }
        if (contLivroNeuro >= 3) {
            quizzResultado.innerHTML = `<div class="containerQuizzResul" style="display: flex;">
                     <div class="pQuizzResultado">Seu resultado foi: <br>
                        Neuromancer</div>
                    <div onclick="mostrar(5)">
                        <img src="./img/imgCapaLivros/Neuromancer.jpg">
                    </div>  `
                    ganhadorVar = 5
        }
        if ( 3) {
            quizzResultado.innerHTML = `<div class="containerQuizzResul" style="display: flex;">
                     <div class="pQuizzResultado">Seu resultado foi: <br>
                        Jogador Número Um</div>
                    <div onclick="mostrar(20)">
                        <img src="./img/imgCapaLivros/JogadorNúmeroUm.jpg">
                    </div>  `
                    ganhadorVar = 20
        }
        if (contLivroFim >= 3) {
            quizzResultado.innerHTML = `<div class="containerQuizzResul" style="display: flex;">
                     <div class="pQuizzResultado">Seu resultado foi: <br>
                        O Fim da Eternidade</div>
                    <div onclick="mostrar(1)">
                        <img src="./img/imgCapaLivros/oFimdoAmanha.jpg">
                    </div>  `
                    ganhadorVar = 1
        }

       

    }

    function cadastrarResultado() {
        
        //Recupere o valor da nova input pelo nome do id
        // Agora vá para o método fe//tch logo abaixo
        
        
    
        // Enviando o valor da nova input
        fetch("/quizz/cadastrarQuizz", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vá para o arquivo routes/usuario.js
                fkUsuarioServer: ID_USUARIO,
                fkLivroServer: ganhadorVar,
                

            })
        }).then(function (resposta) {

            console.log("resposta: ", resposta);

           
        }).catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
            // finalizarAguardar();
        });

        return false;
    }

</script>